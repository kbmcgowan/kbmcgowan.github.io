<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.9.9">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-04-15">

<title>Lin 331 - Language in the United States – Kevin B. McGowan</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-5d254f1e278c2921d96b26102a150bb1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-82934952497c43803fad7afc138b65cd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link rel="apple-touch-icon" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="manifest" href="../../site.webmanifest">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Kevin B. McGowan</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../research/index.html"> 
<span class="menu-text">research</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../teaching/index.html"> 
<span class="menu-text">teaching</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../stuff/index.html"> 
<span class="menu-text">stuff</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../cv/index.html"> 
<span class="menu-text">cv</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lin 331 - Language in the United States</h1>
  <div class="quarto-categories">
    <div class="quarto-category">teaching sociolinguistics</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 15, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>This course is an introduction to the linguistic diversity of the United States and the role of language in the production and negotiation of various forms of social difference (e.g., ethnicity, gender, region, etc.). The course examines the ways in which language serves to construct social categories and the relationship between language and identity, emphasizing the ways in which individuals use language to present themselves as a specific type of person. The course also outlines linguistic and social implications of non-standard English dialects and multilingualism in American society. Emphasis will be given to questions of power and resistance related to language use in the contexts of government, education, and business. Students will learn how to collect information about language use and analyze it to develop informed opinions about situations in which linguistic differences have implications for issues of social equality and justice.</p>
<section id="required-materials" class="level2">
<h2 class="anchored" data-anchor-id="required-materials">Required Materials</h2>
<section id="textbook" class="level3">
<h3 class="anchored" data-anchor-id="textbook">Textbook</h3>
<ul>
<li><em>English with an accent: Language, ideology, and discrimination in the United States, Third Edition</em> (ISBN 1138041939) by Rusty Barrett, Jennifer Cramer, and Kevin B. McGowan THIRD EDITION (Routledge, 2023) [Please DO NOT try to use the first or second editions; the new edition is very different]. Readings from this book are marked as EWAA in the schedule. Please note that I am one of the 3 authors of this textbook but I will earn no royalties from your purchase as these are donated to the department.</li>
</ul>
</section>
<section id="additional-readings" class="level3">
<h3 class="anchored" data-anchor-id="additional-readings">Additional Readings</h3>
<p>Additional readings will be made available on Canvas (marked as C on the schedule).</p>
</section>
</section>
<section id="course-goalsobjectives" class="level2">
<h2 class="anchored" data-anchor-id="course-goalsobjectives">Course Goals/Objectives:</h2>
<ul>
<li>Demonstrate an understanding of historical changes in the language diversity and shifts in the linguistic categories related to racial and ethnic categorizations in the United States</li>
<li>Teach sociolinguistic approaches to analyzing forms of social and linguistic difference</li>
<li>Demonstrate the equality of different dialects and the rule-based nature of all forms of language and be familiar with the basic grammar of non-standard dialects of American English</li>
<li>Develop an understanding of bilingualism and the cultural and historical significance of languages other than English in the United States</li>
<li>Learn the basic laws related to language rights and be able to apply them to contexts associated with education, business, and civic participation</li>
<li>Learn to critically analyze language use in literary and media representations of identity and to analyze rhetorical and linguistic strategies typically found in discussions related to social difference and diversity</li>
</ul>
</section>
<section id="student-learning-outcomes" class="level2">
<h2 class="anchored" data-anchor-id="student-learning-outcomes">Student Learning Outcomes:</h2>
<p>Upon completion of this course, students will be able to:</p>
<ul>
<li>Demonstrate knowledge of the legal issues related to language differences, including laws concerning the use of languages other than English in courts and in the workplace, through detailed analysis of hypothetical situations involving language conflict.</li>
<li>Acquire the ability to analyze forms of social difference based on knowledge of historical, cultural, and linguistic differences by conducting independent research on sociolinguistic issues in the United States.</li>
<li>Show recognition of the ways in which linguistic differences relate to questions of social justice and civic participation through the analysis of documents related to linguistic diversity.</li>
<li>Demonstrate the ability to find information related to proposed legislation concerning language policy at the state and national level and to compare language policy in different states by conducting independent research on government documents.</li>
<li>Learn to analyze the language used in writing about (or discussion of) social difference in order to recognize forms of prejudice including stereotyped representations as demonstrated through the analysis of primary texts.</li>
</ul>
</section>
<section id="course-requirements" class="level2">
<h2 class="anchored" data-anchor-id="course-requirements">Course Requirements</h2>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Assignment</th>
<th>Weight</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>✓ Assignments (x 5)</td>
<td>40%</td>
</tr>
<tr class="even">
<td>✓ Participation</td>
<td>10%</td>
</tr>
<tr class="odd">
<td>✓ Midterm</td>
<td>25%</td>
</tr>
<tr class="even">
<td>✓ Final</td>
<td>25%</td>
</tr>
</tbody>
</table>
<section id="assignments" class="level4">
<h4 class="anchored" data-anchor-id="assignments">✓ Assignments</h4>
<p>Assignments for this class (distributed via Canvas) are short activities based on the content of course lectures and reading assignments. Most of these assignments are individual efforts, though some may require students to work in groups. No cheating (including the use of generative AI) will be tolerated. There will be five (5) such assignments. Due dates for these assignments are listed in the course schedule below.</p>
</section>
<section id="exams" class="level4">
<h4 class="anchored" data-anchor-id="exams">✓ Exams</h4>
<p>There will be two in-class exams: a midterm and a final. The final is not cumulative and will only cover the material after the midterm exam.</p>
</section>
<section id="participation" class="level4">
<h4 class="anchored" data-anchor-id="participation">✓ Participation</h4>
<p>You are expected to attend each class and to have done the reading assigned for that day. In the course schedule, readings appear next to the day on which they are due. I recommend that you take notes on the readings and come prepared with questions or comments to contribute to class discussion. Your participation grade will be based on participation questions that are sprinkled throughout the lectures.</p>
</section>
</section>
<section id="grading-practices" class="level2">
<h2 class="anchored" data-anchor-id="grading-practices">Grading Practices</h2>
<p>The grading scale for the final course grade will be as follows. Note: it is also possible to receive an Incomplete (I) as a placeholder grade if difficult, unavoidable circumstances arise during the semester that make it impossible for you to complete the course requirements before grades are due (but this has to be discussed with me in advance!).</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Final Percentage</th>
<th>Letter Grade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>90 – 100%</td>
<td>A</td>
</tr>
<tr class="even">
<td>80 – 89%</td>
<td>B</td>
</tr>
<tr class="odd">
<td>70 – 79%</td>
<td>C</td>
</tr>
<tr class="even">
<td>60 – 69%</td>
<td>D</td>
</tr>
<tr class="odd">
<td>Below 60%</td>
<td>E</td>
</tr>
</tbody>
</table>
</section>
<section id="attendance-policy" class="level2">
<h2 class="anchored" data-anchor-id="attendance-policy">Attendance Policy</h2>
<p>In order to benefit fully from lectures and from the insights of the other students in the course (and to contribute your own), it is important that you attend every class session; if you do have to miss a class session, you must let me know the circumstances of your absence. If you have specific questions regarding any information covered in class, please come and see one of us during office hours (or schedule an appointment for another time); please do not expect us to repeat entire lectures, however.</p>
<p>If you need to leave early for any reason, please let us know before class starts.</p>
</section>
<section id="academic-policy-statements" class="level2">
<h2 class="anchored" data-anchor-id="academic-policy-statements">Academic Policy Statements</h2>
<ul>
<li><a href="https://provost.uky.edu/proposals/guidance-course-proposals/standard-academic-policy-statements">Academic Policy Statements</a></li>
<li><a href="https://studentsuccess.uky.edu/get-help">Mental Health Resources</a></li>
<li><a href="https://studentsuccess.uky.edu/academicresources">Academic Support</a></li>
<li><a href="https://studentsuccess.uky.edu/disability-resource-center">Disability Resource Center</a></li>
<li><a href="https://ombud.uky.edu/students">Academic Ombud</a></li>
<li><a href="https://provost.uky.edu/instructor-resources">Classroom Emergency Preparedness and Response information</a></li>
</ul>
</section>
<section id="plagiarism-academic-integrity" class="level2">
<h2 class="anchored" data-anchor-id="plagiarism-academic-integrity">Plagiarism &amp; Academic Integrity</h2>
<ul>
<li><a href="https://ombud.uky.edu/students/what-plagiarism">What is Plagiarism?</a> Summary: Do not present others’ work as your own. If you get an idea from a source, cite that source (both to show the research work you’ve done and to credit the people who have influenced your thinking). Buying a paper from someone, using Generative AI, or copying something from the internet are each obviously plagiarism and unacceptable, but plagiarism includes behaviors students sometimes find surprising. Paraphrasing someone else’s writing in your own words (without citing them) is plagiarism. Citing something you did not read based on someone else’s commentary on that book or paper is plagiarism. Be thoughtful, give credit where it is due, and do your own work and you won’t have any problems.</li>
<li><a href="https://ombud.uky.edu/students/what-cheating">What is Cheating?</a> Before taking or giving answers to a quiz, test, homework, transcription, etc. to someone else, please ask yourself what the point or value of earning a university degree <em>is</em> if you aren’t going to do the work yourself? I do <em>not</em> look kindly on cheating which includes such insidious behaviors as taking a Canvas exam or quiz and then sharing the answers with a group chat.</li>
<li><strong>Generative AI</strong> use for any assignment is strictly prohibited. Idea generation, analytical thinking, and critical analysis are key outcomes in this course. As a result, all assignments submitted by the student must be 100% their original work. Generative AI tools, including Grammarly, should not be used for any stage of any assignment or activity. Any submission of AI-generated content (even if you paraphrase the output) will be considered misuse in the context of this course and consequences will follow University policies. See the&nbsp;<a href="https://www.uky.edu/universitysenate/ao">University Senate guidelines found here</a>. Beyond this, Generative AI is <em>terrible</em> at phonetics and phonology. I guarantee you can do a better job yourself.</li>
<li><a href="https://ombud.uky.edu/students/academic-misconduct-process">Academic Misconduct Process</a></li>
</ul>
</section>
<section id="course-outline-subject-to-change" class="level2">
<h2 class="anchored" data-anchor-id="course-outline-subject-to-change">Course Outline (subject to change)</h2>
<p>z - January 14, 2025 (Tuesday) - Introduction, review syllabus - January 16, 2025 (Thursday) - Introduction to Language Ideologies - EWAA, Chapter 1 - January 21, 2025 (Tuesday) - Language, categorization, &amp; social identities - EWAA, Chapter 2 - January 23, 2025 (Thursday) - A quick introduction to Language &amp; Linguistics - EWAA, Chapter 3 - <strong>Assignment #1 Due</strong> - January 28, 2025 (Tuesday) - Language subordination - EWAA, Chapter 4 - January 30, 2025 (Thursday) - February 4, 2025 (Tuesday) - American accents - EWAA, Chapter 5 - February 6, 2025 (Thursday) - <strong>Assignment #2 Due</strong> - February 11, 2025 (Tuesday) - Language, racialization, &amp; race - EWAA, Chapter 6 - February 13, 2025 (Thursday) - February 18, 2025 (Tuesday) - Non-English spoken languages in the US - EWAA, Chapter 7 - February 20, 2025 (Thursday) - February 25, 2025 (Tuesday) - American Sign Language - EWAA, Chapter 8 - February 27, 2025 (Thursday) - March 4, 2025 (Tuesday) - Perceptual dialectology - EWAA, Chapter 9 - March 6, 2025 (Thursday) - <strong>Assignment #3 Due</strong> - March 11, 2025 (Tuesday) - First half wrap-up, Exam Prep - March 13, 2025 (Thursday) - <strong>Midterm Exam</strong> - March 18, 2025 (Tuesday) - <em>Spring Break</em> - March 20, 2025 (Thursday) - <em>Spring Break</em> - March 25, 2025 (Tuesday) - A history of ‘r’ in the US - EWAA, Chapter 10 - March 27, 2025 (Thursday) - April 1, 2025 (Tuesday) - Language in education - EWAA, Chapter 11 - April 3, 2025 (Thursday) - <strong>Assignment #4 Due</strong> - April 8, 2025 (Tuesday) - Language in the media - EWAA, Chapter 12 - April 10, 2025 (Thursday) - April 15, 2025 (Tuesday) - Language in the workplace - EWAA, Chapter 13 - April 17, 2025 (Thursday) - <strong>Assignment #5 Due</strong> - April 22, 2025 (Tuesday) - Language in the law - EWAA, Chapter 14 - April 24, 2025 (Thursday) - April 29, 2025 (Tuesday) - Stereotype as cognitive template - Lindeman 2002 (C) - McGowan 2015 (C)</p>
<ul>
<li>May 8, 2025 (Thursday)
<ul>
<li><a href="https://registrar.uky.edu/calendars/examination-schedules">Final Exam</a></li>
<li>8:00 - 10:00am, in person</li>
</ul></li>
</ul>
</section>
<section id="course-copyright" class="level2">
<h2 class="anchored" data-anchor-id="course-copyright">Course Copyright</h2>
<p>All original instructor-provided content for this course, which may include handouts, assignments, and lectures, is the intellectual property of the instructor(s). Students enrolled in the course this academic term may use the original instructor-provided content for their learning and completion of course requirements this term, but such content must not be reproduced or sold. Students enrolled in the course this academic term are hereby granted permission to use original instructor-provided content for reasonable educational and professional purposes extending beyond this course and term, such as retaining for your own personal use, studying for a comprehensive or qualifying examination in a degree program, preparing for a professional or certification examination, or to assist in fulfilling responsibilities at a job or internship; other uses of original instructor-provided content require written permission from the instructor(s) in advance.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/vowel\.space");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>